function getTestPlayer(u,t){if(typeof u!=="object"||typeof t!=="object"){return false}u.id=parseInt(u.id,10);if(!u.id||isNaN(u.id)||u.id<=0){u.id=1}else{if(u.id>10){u.id=10}}var y="aopp-player-";if(u.id){y+=u.id}if(!u.contenttype||typeof u.contenttype==="undefined"){u.contenttype="video"}var c='data-showplaylist="false"';var b="";var o="";if(u.showplaylist=="true"||u.showplaylist==1){b="mep-playlist";c='data-showplaylist="true"';if(u.playlistposition=="top"){o=""}else{if(u.playlistposition=="left"){o=""}else{if(u.playlistposition=="right"){o=""}else{if(u.playlistposition=="bottom"){o="video_bottom"}}}}}var s='width=""';if(u.width){s='width="'+u.width+'"'}var r='height=""';if(u.height){r='height="'+u.height+'"'}var q='controls=""';if(u.controls=="controls"){q='controls="controls"'}var p="";if(u.autoplay=="true"){p="autoplay muted"}var n='preload=""';if(u.preload){n='preload="'+u.preload+'"'}var w='positionplayer=""';if(u.positionplayer){w='positionplayer="'+u.positionplayer+'"'}var m="";if(u.poster){m='poster="'+u.poster+'"'}var h=false;if(u.autoplaysound){h=true}var d="[aopp-player-"+u.id+' contenttype="'+u.contenttype+'" showplaylist="'+u.showplaylist+'" width="'+u.width+'" height="'+u.height+'" controls="'+u.controls+'" preload="'+u.preload+'" playlistposition="'+u.playlistposition+'" autoplay="'+u.autoplay+'" autoplaysound="'+u.autoplaysound+'" orderbutton="'+u.orderbutton+'" orderbuttonposition="'+u.orderbuttonposition+'" orderbuttonlink="'+u.orderbuttonlink+'" orderbuttontitle="'+u.orderbuttontitle+'" orderbuttoncolor="'+u.orderbuttoncolor+'" orderbuttontime="'+u.orderbuttontime+'" orderbuttonfontsize="'+u.orderbuttonfontsize+'" orderbuttonleft="'+u.orderbuttonleft+'" orderbuttonright="'+u.orderbuttonright+'" positionplayer="'+u.positionplayer+'" controls_navigation="'+u.controls_navigation+'"]';var l="";if(!u.id){l='<div class="alert alert-warning" style="margin-bottom:0">'+u.settings.id+"</div>"}else{if(!u.contenttype){l='<div class="alert alert-warning" style="margin-bottom:0">'+u.settings.contenttype+"</div>"}}var k="";if(u.width=="100%"){k+="width:"+u.width+";"}else{k+="width:"+u.width+"px;"}if(u.positionplayer=="center"){k+="margin:0 auto 0 auto;"}else{if(u.positionplayer=="left"){k+="margin:0 auto 0 0;"}else{if(u.positionplayer=="right"){k+="margin:0 0 0 auto;"}}}if(!l){if(u.contenttype=="video"){l='<video class="'+y+" "+b+" "+o+'" '+p+" "+s+" "+r+" "+c+" "+q+" "+n+" "+m+" "+w+">";jQuery.each(t,function(z,B){if(B.link){var D='src="'+B.link+'" data-src="'+B.link+'"'}else{return}if(B.poster){var E='data-poster="'+B.poster+'" data-aopp-im="'+B.poster+'"'}else{var E=""}if(B.type){var A='type="'+B.type+'"'}else{return}if(B.title){var C='title="'+B.title+'"'}else{var C=""}l+="<source "+D+" "+E+" "+A+" "+C+">";d+='[aopp-source link="'+B.link+'" poster="'+B.poster+'" title="'+B.title+'" type="'+B.type+'"]'});l+="</video>"}else{if(u.contenttype=="audio"){l='<audio class="'+y+" "+b+" "+o+'" '+p+" "+s+" "+r+" "+c+" "+q+" "+n+" "+w+">";jQuery.each(t,function(z,B){if(B.link){var D='src="'+B.link+'" data-src="'+B.link+'"'}else{return}if(B.poster){var E='data-poster="'+B.poster+'" data-aopp-im="'+B.poster+'"'}else{var E=""}if(B.type){var A='type="'+B.type+'"'}else{return}if(B.title){var C='title="'+B.title+'"'}else{var C=""}l+="<source "+D+" "+E+" "+A+" "+C+">";d+='[aopp-source link="'+B.link+'" poster="'+B.poster+'" title="'+B.title+'" type="'+B.type+'"]'});l+="</audio>"}}}if(l){jQuery("#test_video").html('<div style="'+k+'" class="aopp_wrap_video">'+l+"</div>")}d+="[/aopp-player-"+u.id+"]";if(d){jQuery("#aopp-shortcode").html(d)}var f="";if(u.orderbutton=="true"&&u.orderbuttonlink&&u.orderbuttonlink){var v="";if(u.orderbuttonposition=="topleft"){v="position:absolute;z-index:9901;left:"+u.orderbuttonleft+"px;top:4px"}else{if(u.orderbuttonposition=="topright"){v="position:absolute;z-index:9901;right:"+u.orderbuttonright+"px;top:4px"}else{if(u.orderbuttonposition=="topcenter"){v="position:absolute;z-index:9901;left:50%;margin-left:-"+u.orderbuttontitle.length+"px;top:4px"}else{if(u.orderbuttonposition=="bottomleft"){v="position:absolute;z-index:9901;left:"+u.orderbuttonleft+"px;bottom:30px"}else{if(u.orderbuttonposition=="bottomright"){v="position:absolute;z-index:9901;right:"+u.orderbuttonright+"px;bottom:30px"}else{if(u.orderbuttonposition=="bottomcenter"){v="position:absolute;z-index:9901;left:50%;margin-left:-"+u.orderbuttontitle.length+"px;bottom:30px"}else{if(u.orderbuttonposition=="leftcenter"){v="position:absolute;z-index:9901;left:"+u.orderbuttonleft+"px"}else{if(u.orderbuttonposition=="rightcenter"){v="position:absolute;z-index:9901;right:"+u.orderbuttonright+"px"}}}}}}}}f+='<div class="mejs__overlay-order" style="display:none;width:100%;height:100%;">';f+='<a style="font-size:'+u.orderbuttonfontsize+"px;"+v+'" class="aopp-btn aopp-btn-'+u.orderbuttoncolor+'" href="'+u.orderbuttonlink+'" target="_blank">'+u.orderbuttontitle+"</a>";f+="</div>"}var a="";if(u.autoplay=="true"&&u.autoplaysound=="true"){a+='<div class="mejs__overlay-warning" style="width:100%;height:100%;">';a+='<div style="position:absolute;left:4px;top:4px" class="aopp-warning aopp-btn aopp-btn-danger">'+u.settings.warningbutton+"</div>";a+="</div>"}var g=[];if(u.controls=="controls"){var g=[];var j=0;g[j]="playlistfeature";j++;if(u.controls_navigation==true||u.controls_navigation=="true"){g[j]="prevtrack";j++}g[j]="playpause";j++;if(u.controls_navigation==true||u.controls_navigation=="true"){g[j]="nexttrack";j++}g[j]="loop";j++;g[j]="current";j++;g[j]="progress";j++;g[j]="duration";j++;g[j]="volume";j++;g[j]="fullscreen";j++;g[j]="speed";j++}if(u.width=="100%"){var e=u.width;var i=u.width;var x=true}else{var e=false;var i=false;var x=false}mejs.i18n.language("ru");jQuery("."+y).mediaelementplayer({features:g,shuffle:false,loop:false,loopplaylist:true,speeds:["0.50","0.75","1.00","1.25","1.50","2.00"],pluginPath:u.settings.path+"assets/mediaelement/player/",id:y,clickToPlayPause:true,videoWidth:e,videoHeight:i,enableAutosize:x,success:function(D,B){var G=$(".mejs__controls");G.find(".mejs__prevtrack-button>button").attr("title",mejs.i18n[mejs.i18n.language()]["mejs.prevText"]);G.find(".mejs__nexttrack-button>button").attr("title",mejs.i18n[mejs.i18n.language()]["mejs.nextText"]);G.find(".mejs__loop-button>button").attr("title",mejs.i18n[mejs.i18n.language()]["mejs.loopText"]);G.find(".mejs__fullscreen-button>button").attr("title",mejs.i18n[mejs.i18n.language()]["mejs.fullscreenText"]);G.find(".mejs__shuffle-button>button").attr("title",mejs.i18n[mejs.i18n.language()]["mejs.shuffleText"]);G.find(".mejs__playlist-button>button").attr("title",mejs.i18n[mejs.i18n.language()]["mejs.playlistText"]);var J=jQuery("video."+y);var C=J.parents(".mejs__container");var F=C.find(".mejs__inner>.mejs__layers");if(F&&typeof F!=="undefined"){F.append(f+a);D.addEventListener("timeupdate",function(){setTimeout(function(){if(D.currentTime==0){C.find(".mejs__overlay-warning").remove();D.setVolume(1);D.muted=false}},1000)},false)}var E=u.orderbuttontime;D.addEventListener("timeupdate",function(){if(D.currentTime>E){C.find(".mejs__overlay-order").fadeIn(500)}},false);C.find(".aopp-warning").on("click",function(){C.find(".mejs__overlay-warning").fadeOut(500,function(){C.find(".mejs__overlay-warning").remove()});D.setVolume(1);D.muted=false});C.find(".mejs__overlay-order").on("click",function(M){C.find(".mejs__overlay-order").remove();B.pause()});C.find(".mejs__overlay-warning").on("click",function(M){B.play()});D.addEventListener("play",function(){console.log("test1")},false);D.addEventListener("pause",function(){console.log("test2")},false);var H=640/360;var A=J.parents(".mejs__container").width();if(A&&typeof A!=="undefined"){if(H<1){var I=A*H}else{var I=A/H}}if(I&&typeof I!=="undefined"){J.parents(".mejs__container").height(Math.round(I)+"px");var K=Math.round(I);J.parents(".mejs__container").find(".mejs__overlay").height(Math.round(I)+"px");J.parents(".mejs__container").find(".mejs__layers").height(Math.round(I)+"px")}else{var K=J.parents(".mejs__container").find(".mejs__poster.mejs__layer").height()}if(K&&typeof K!=="undefined"){J.parents(".mejs__container").find(".mejs__playlist.mejs__layer").css("top",K+"px")}var L=J.parents(".mejs__container").find("ul.mejs").height();if(L&&typeof L!=="undefined"){J.parents(".mejs__container").find(".mep-playlist.video_bottom").css("margin-bottom",L+"px")}var z=J.find("source:nth-child(1)").attr("data-aopp-im");if(z&&typeof z!=="undefined"){J.parents(".mejs__container").find("video."+y).attr("poster",z);J.parents(".mejs__container").find("video."+y).attr("data-poster",z)}if(u.contenttype=="audio"&&u.id){jQuery("audio.aopp-player-"+u.id).show()}jQuery(".mejs__container").css("border","1px solid #ffffff")},error:function(){console.log("Error setting media!")}});return false}function reloadForm(d,b,c,a,e){jQuery("#aopp-overlay, #aopp-loader").show();jQuery("#aopp-player").load(a+"admin-ajax.php?action="+d,{data:c,token:b,id:e},function(){loadPage()})}function loadPage(){jQuery("#aopp-overlay, #aopp-loader").hide()}jQuery(document).ready(function(){loadPage();jQuery(document).delegate(".clone_button .fa-plus","mouseleave",function(a){});jQuery(document).delegate(".clone_button .fa-plus","mouseenter",function(a){});jQuery(".message_output").fadeOut(3000);jQuery('[data-toggle="tooltip"]').tooltip();jQuery(document).delegate(".fa-plus","click",function(g){var f=jQuery("#aopp-source-player");var c=f.children(".aopp_clone_block").last();var b=parseInt(c.attr("data-id"),10);if(!isNaN(b)){if(typeof a==="undefined"){var a=b+1}else{a++}var d=jQuery(c).clone().attr("data-id",a);d.find('input[data-type="link"]').val("");d.find('input[data-type="poster"]').val("");d.find('input[data-type="title"]').val("");d.find(".aopp-delete-block").show();f.append(d)}});jQuery(document).delegate(".click_copy","click",function(c){var c=this;if(window.getSelection){var a=window.getSelection();if(a.setBaseAndExtent[0]){a.setBaseAndExtent(c,0,c,c.innerText.length-1)}else{var b=document.createRange();b.selectNodeContents(c);a.removeAllRanges();a.addRange(b)}}else{if(document.getSelection){var a=document.getSelection();var b=document.createRange();b.selectNodeContents(c);a.removeAllRanges();a.addRange(b)}else{if(document.selection){var b=document.body.createTextRange();b.moveToElementText(c);b.select()}}}document.execCommand("copy")})});