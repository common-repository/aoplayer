"use strict";(function(a){a.extend(mejs.MepDefaults,{loopText:"Repeat On/Off",shuffleText:"Shuffle On/Off",nextText:"Next Track",prevText:"Previous Track",playlistText:"Show/Hide Playlist",fullscreenText:"Show/Hide Fullscreen"});a.extend(MediaElementPlayer.prototype,{buildloop:function(e,c,g,f){var d=this;var b=a('<div class="mejs__button mejs__loop-button '+(e.options.loopplaylist?"mejs__loop-on":"mejs__loop-off")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.loopText+'"></button></div>').appendTo(c).click(function(){e.options.loopplaylist=!e.options.loopplaylist;a(f).trigger("mep-looptoggle",[e.options.loopplaylist]);if(e.options.loopplaylist){b.removeClass("mejs__loop-off").addClass("mejs__loop-on")}else{b.removeClass("mejs__loop-on").addClass("mejs__loop-off")}});d.loopToggle=a(d.controls).find(".mejs__loop-button")},loopToggleClick:function(){var b=this;b.loopToggle.trigger("click")},buildshuffle:function(d,b,g,f){var c=this;var e=a('<div class="mejs__button mejs__playlist-plugin-button mejs__shuffle-button '+(d.options.shuffle?"mejs__shuffle-on":"mejs__shuffle-off")+'"><button type="button" aria-controls="'+d.id+'" title="'+d.options.shuffleText+'"></button></div>').appendTo(b).click(function(){d.options.shuffle=!d.options.shuffle;a(f).trigger("mep-shuffletoggle",[d.options.shuffle]);if(d.options.shuffle){e.removeClass("mejs__shuffle-off").addClass("mejs__shuffle-on")}else{e.removeClass("mejs__shuffle-on").addClass("mejs__shuffle-off")}});c.shuffleToggle=a(c.controls).find(".mejs__shuffle-button")},shuffleToggleClick:function(){var b=this;b.shuffleToggle.trigger("click")},buildprevtrack:function(e,c,g,f){var d=this;var b=a('<div class="mejs__button mejs__playlist-plugin-button mejs__prevtrack-button mejs__prevtrack"><button type="button" aria-controls="'+e.id+'" title="'+e.options.prevText+'"></button></div>');b.appendTo(c).click(function(){a(f).trigger("mep-playprevtrack");e.playPrevTrack()});d.prevTrack=a(d.controls).find(".mejs__prevtrack-button")},prevTrackClick:function(){var b=this;b.prevTrack.trigger("click")},buildnexttrack:function(d,b,f,e){var c=this;var g=a('<div class="mejs__button mejs__playlist-plugin-button mejs__nexttrack-button mejs__nexttrack"><button type="button" aria-controls="'+d.id+'" title="'+d.options.nextText+'"></button></div>');g.appendTo(b).click(function(){a(e).trigger("mep-playnexttrack");d.playNextTrack()});c.nextTrack=a(c.controls).find(".mejs__nexttrack-button")},nextTrackClick:function(){var b=this;b.nextTrack.trigger("click")},buildplaylist:function(e,b,g,f){var d=this;var c=a('<div class="mejs__button mejs__playlist-plugin-button mejs__playlist-button '+(e.options.playlist?"mejs__hide-playlist":"mejs__show-playlist")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.playlistText+'"></button></div>');c.appendTo(b).click(function(){d.togglePlaylistDisplay(e,g,f)});d.playlistToggle=a(d.controls).find(".mejs__playlist-button")},playlistToggleClick:function(){var b=this;b.playlistToggle.trigger("click")},buildaudiofullscreen:function(e,c,g,f){if(e.isVideo){}else{var d=this;d.fullscreenBtn=a('<div class="mejs__button mejs__fullscreen-button"><button type="button" aria-controls="'+d.id+'" title="'+d.options.fullscreenText+'" aria-label="'+d.options.fullscreenText+'"></button></div>');d.fullscreenBtn.appendTo(c);var h=!mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.hasSemiNativeFullScreen&&!d.media.webkitEnterFullscreen;if(d.media.pluginType==="native"&&!h||!d.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox){d.fullscreenBtn.click(function(){var i=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||e.isFullScreen;if(i){e.exitFullScreen()}else{e.enterFullScreen()}})}else{var b="manual-fullscreen";d.fullscreenBtn.click(function(){var i=e.container.hasClass(b);if(i){a(document.body).removeClass(b);a(e.container).removeClass(b);e.resetSize();d.isFullScreen=false}else{d.normalHeight=d.container.height();d.normalWidth=d.container.width();a(document.body).addClass(b);a(e.container).addClass(b);d.container.css({width:"100%",height:"100%"});a(e.layers).children().css("width","100%").css("height","100%");d.containerSizeTimeout=setTimeout(function(){d.container.css({width:"100%",height:"100%"});a(e.layers).children().css("width","100%").css("height","100%");d.setControlsSize()},500);e.setControlsSize();d.isFullScreen=true}})}}},buildplaylistfeature:function(m,n,f,c){var o=this,d=a('<div class="mejs__playlist mejs__layer"><ul class="mejs"></ul></div>').appendTo(f);if(!!a(c).find("video, audio").data("showplaylist")){m.options.playlist=true;a("#"+m.id).find(".mejs__overlay-play").hide()}if(!m.options.playlist){d.hide()}var g=function(p){var q=p.split("/");if(q.length>0){return decodeURIComponent(q[q.length-1])}else{return""}};var i=[],l,k="";a("#"+m.id).find(".mejs__mediaelement source").each(function(){if(a(this).parent()[0]&&a(this).parent()[0].canPlayType){l=a(this).parent()[0].canPlayType(this.type)}else{if(a(this).parent()[0]&&a(this).parent()[0].player&&a(this).parent()[0].player.media&&a(this).parent()[0].player.media.canPlayType){l=a(this).parent()[0].player.media.canPlayType(this.type)}else{console.error("Cannot determine if we can play this media (no canPlayType()) on"+a(this).toString())}}if(!k&&(l==="maybe"||l==="probably")){k=this.type}var q="";if(this.type&&this.type!==undefined){q=this.type.split("/")[1]}else{q=a(this).attr("type").split("/")[1]}if(q){if(q.toLowerCase()==="hls"&&a(this).parent("video").css("display")==="none"){return}if(q.toLowerCase()==="hls"&&a(this).parent("audio").attr("style")!==undefined){return}if(!k&&(q.toLowerCase()==="hls"||q.toLowerCase()==="rtmp")){k=this.type}}if(!!k&&this.type===k){if(a.trim(this.src)!==""){var p={};p.source=a.trim(this.src);if(a.trim(this.title)!==""){p.name=a.trim(this.title)}else{p.name=g(p.source)}p.poster=a(this).data("poster");i.push(p)}}});for(var b in i){var j=a('<li data-url="'+i[b].source+'" data-poster="'+i[b].poster+'" title="'+i[b].name+'"><span>'+i[b].name+"</span></li>");a(f).find(".mejs__playlist > ul").append(j);if(a(m.media).hasClass("mep-slider")){j.css({"background-image":'url("'+j.data("poster")+'")'})}}m.videoSliderTracks=i.length;a(f).find("li:first").addClass("current played");if(!m.isVideo){m.changePoster(a(f).find("li:first").data("poster"))}var h=a('<a class="mep-prev">'),e=a('<a class="mep-next">');m.videoSliderIndex=0;a(f).find(".mejs__playlist").append(h);a(f).find(".mejs__playlist").append(e);a("#"+m.id+".mejs__container.mep-slider").find(".mejs__playlist ul li").css({transform:"translate3d(0, -20px, 0) scale3d(0.75, 0.75, 1)"});h.click(function(){var p=true;m.videoSliderIndex-=1;if(m.videoSliderIndex<0){m.videoSliderIndex=0;p=false}if(m.videoSliderIndex===m.videoSliderTracks-1){e.fadeOut()}else{e.fadeIn()}if(m.videoSliderIndex===0){h.fadeOut()}else{h.fadeIn()}if(p===true){m.sliderWidth=a("#"+m.id).width();a("#"+m.id+".mejs__container.mep-slider").find(".mejs__playlist ul li").css({transform:"translate3d(-"+Math.ceil(m.sliderWidth*m.videoSliderIndex)+"px, -20px, 0) scale3d(0.75, 0.75, 1)"})}}).hide();e.click(function(){var p=true;m.videoSliderIndex+=1;if(m.videoSliderIndex>m.videoSliderTracks-1){m.videoSliderIndex=m.videoSliderTracks-1;p=false}if(m.videoSliderIndex===m.videoSliderTracks-1){e.fadeOut()}else{e.fadeIn()}if(m.videoSliderIndex===0){h.fadeOut()}else{h.fadeIn()}if(p===true){m.sliderWidth=a("#"+m.id).width();a("#"+m.id+".mejs__container.mep-slider").find(".mejs__playlist ul li").css({transform:"translate3d(-"+Math.ceil(m.sliderWidth*m.videoSliderIndex)+"px, -20px, 0) scale3d(0.75, 0.75, 1)"})}});a(f).find(".mejs__playlist > ul li").click(function(){if(!a(this).hasClass("current")){a(this).addClass("played");m.playTrack(a(this))}else{if(!m.media.paused){m.pause()}else{m.play()}}});c.addEventListener("ended",function(){m.playNextTrack();if(m.options.loopplaylist){m.play()}},false);c.addEventListener("playing",function(){a(m.container).removeClass("mep-paused").addClass("mep-playing");if(m.isVideo){}},false);c.addEventListener("play",function(){if(!m.isVideo){a(f).find(".mejs__poster").show()}},false);c.addEventListener("pause",function(){a(m.container).removeClass("mep-playing").addClass("mep-paused")},false)},playNextTrack:function(){var e=this,c;var d=a(e.layers).find(".mejs__playlist > ul > li");var h=d.filter(".current");var g=d.not(".played");if(g.length<1){a(h).removeClass("played").siblings().removeClass("played");g=d.not(".current")}var b=false;if(e.options.shuffle){var f=Math.floor(Math.random()*g.length);c=g.eq(f)}else{c=h.next();if(c.length<1&&(e.options.loopplaylist||e.options.autoRewind)){c=a(h).siblings().first();b=true}}e.options.loop=false;if(c.length==1){a(c).addClass("played");e.playTrack(c);e.options.loop=e.options.loopplaylist||e.options.continuous&&!b}},playPrevTrack:function(){var c=this,e;var b=a(c.layers).find(".mejs__playlist > ul > li");var g=b.filter(".current");var f=b.filter(".played").not(".current");if(f.length<1){a(g).removeClass("played");f=b.not(".current")}if(c.options.shuffle){var d=Math.floor(Math.random()*f.length);e=f.eq(d)}else{e=g.prev();if(e.length<1&&c.options.loopplaylist){e=g.siblings().last()}}if(e.length==1){a(g).removeClass("played");c.playTrack(e)}},changePoster:function(b){var c=this;a(c.layers).find(".mejs__playlist").css("background-image",'url("'+b+'")');c.setPoster(b);a(c.layers).find(".mejs__poster").show()},playTrack:function(b){var c=this;c.pause();c.setSrc(b.data("url"));c.load();c.changePoster(b.data("poster"));c.play();a(b).addClass("current").siblings().removeClass("current")},playTrackURL:function(d){var e=this;var c=a(e.layers).find(".mejs__playlist > ul > li");var b=c.filter('[data-url="'+d+'"]');e.playTrack(b)},togglePlaylistDisplay:function(c,e,d,f){var b=this;if(!!f){c.options.playlist=f==="show"?true:false}else{c.options.playlist=!c.options.playlist}a(d).trigger("mep-playlisttoggle",[c.options.playlist]);if(c.options.playlist){a(e).children(".mejs__playlist").fadeIn();a(b.playlistToggle).removeClass("mejs__show-playlist").addClass("mejs__hide-playlist")}else{a(e).children(".mejs__playlist").fadeOut();a(b.playlistToggle).removeClass("mejs__hide-playlist").addClass("mejs__show-playlist")}},oldSetPlayerSize:MediaElementPlayer.prototype.setPlayerSize,setPlayerSize:function(c,b){var d=this.isVideo;this.isVideo=true;this.oldSetPlayerSize(c,b);this.isVideo=d}})})(mejs.$);